<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AB Fit - Assessoria de Treinamento</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        .mobile-shell {
            max-width: 420px;
            width: 100%;
            height: 896px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border-radius: 30px;
            border: 8px solid #1f2937;
            overflow: hidden;
            position: relative;
        }
        .screen { display: none; }
        .screen.active { display: block; }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #ef4444;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-200 flex items-center justify-center min-h-screen p-4">

    <div class="mobile-shell bg-white">
        <main class="h-full w-full overflow-y-auto bg-gray-50">

            <!-- ======================= TELA LISTA DE ALUNOS ======================= -->
            <div id="studentListScreen" class="screen active">
                <div class="p-4 pt-8">
                    <h1 class="text-2xl font-bold text-gray-800 mb-4">Menu Principal</h1>
                    <div class="bg-gradient-to-r from-red-500 to-red-700 text-white p-4 rounded-lg mb-4 shadow-lg">
                        <div class="flex items-center mb-2">
                             <i data-feather="star" class="w-5 h-5 mr-2"></i>
                            <h3 class="font-bold text-lg">✨ Dica do Dia</h3>
                        </div>
                        <p id="daily-tip" class="text-sm">Carregando dica...</p>
                    </div>
                    <div class="relative mb-4">
                        <input type="text" placeholder="Procurar aluno..." class="w-full p-3 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 bg-white">
                        <i data-feather="search" class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                    </div>
                    <div id="student-list-container" class="space-y-3"></div>
                </div>
            </div>

            <!-- ======================= TELA PERFIL DO ALUNO ======================= -->
            <div id="studentProfileScreen" class="screen">
                <div class="p-4 pt-6 space-y-3 relative">
                    <button class="back-to-list-btn p-2 rounded-full hover:bg-gray-100 absolute top-4 left-2">
                        <i data-feather="arrow-left" class="text-gray-700"></i>
                    </button>
                    <div id="student-profile-info" class="flex items-center pt-8 mb-3">
                        <!-- Student info will be populated by JS -->
                    </div>
                    <button id="openAiModalBtn" class="w-full bg-gray-800 text-white font-bold py-3 rounded-lg hover:bg-gray-900 transition-colors shadow-md flex items-center justify-center">
                       ✨ Gerar Treino com IA
                    </button>
                    <div id="student-profile-buttons" class="grid grid-cols-2 gap-3"></div>
                    <div class="bg-white p-4 rounded-lg border border-gray-200 mt-3">
                        <div id="calendar-header" class="flex justify-between items-center mb-4">
                            <button class="p-2 rounded-full hover:bg-gray-100"><i data-feather="chevron-left"></i></button>
                            <h2 class="font-bold text-lg text-gray-800">Setembro 2025</h2>
                            <button class="p-2 rounded-full hover:bg-gray-100"><i data-feather="chevron-right"></i></button>
                        </div>
                        <div id="calendar-grid" class="grid grid-cols-7 gap-1 text-center text-sm"></div>
                    </div>
                </div>
            </div>
            
            <!-- ======================= TELA DE TREINO ======================= -->
            <div id="trainingScreen" class="screen">
                <div class="p-4 pt-6 relative">
                    <button class="back-to-profile-btn p-2 rounded-full hover:bg-gray-100 absolute top-4 left-2">
                        <i data-feather="arrow-left" class="text-gray-700"></i>
                    </button>
                    <div id="training-content-wrapper" class="pt-8">
                        <!-- JS will populate this -->
                    </div>
                </div>
            </div>

        </main>
        
        <!-- ======================= MODAL GERADOR DE TREINO IA ======================= -->
        <div id="aiGeneratorModal" class="fixed inset-0 bg-black bg-opacity-60 z-50 hidden flex items-center justify-center p-4 transition-opacity duration-300">
            <div class="bg-white rounded-2xl shadow-xl w-full max-w-md p-6 relative transform transition-all duration-300 scale-95 opacity-0" id="modal-content">
                <button id="closeModalBtn" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600"><i data-feather="x"></i></button>
                <h2 class="text-xl font-bold text-gray-800 mb-4 flex items-center"><i data-feather="zap" class="mr-2 text-red-500"></i>Gerador de Treino Rápido</h2>
                <form id="aiWorkoutForm" class="space-y-4">
                     <div>
                        <label for="goal" class="text-sm font-medium text-gray-600">Objetivo Principal</label>
                        <select id="goal" class="w-full p-3 mt-1 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition">
                            <option>Hipertrofia</option>
                            <option>Resistência Muscular</option>
                            <option>Força</option>
                            <option>Perda de Peso</option>
                        </select>
                    </div>
                     <div>
                        <label for="muscle_group" class="text-sm font-medium text-gray-600">Grupo Muscular</label>
                        <input type="text" id="muscle_group" placeholder="Ex: Peito e Tríceps" class="w-full p-3 mt-1 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition">
                    </div>
                     <div>
                        <label for="duration" class="text-sm font-medium text-gray-600">Duração (minutos)</label>
                        <input type="number" id="duration" value="45" class="w-full p-3 mt-1 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition">
                    </div>
                    <button type="submit" class="w-full bg-red-600 text-white font-bold py-3 rounded-lg hover:bg-red-700 transition-colors shadow-md">Gerar Treino ✨</button>
                </form>
                <div id="aiResult" class="mt-6 hidden">
                    <h3 class="font-bold text-lg mb-2">Sugestão de Treino:</h3>
                    <div id="aiResultContent" class="text-sm text-gray-700 bg-gray-100 p-4 rounded-lg max-h-48 overflow-y-auto whitespace-pre-wrap"></div>
                </div>
                 <div id="aiLoader" class="mt-6 hidden flex items-center justify-center flex-col">
                    <div class="loader"></div>
                    <p class="text-gray-600 mt-2 text-sm">Aguarde, a IA está criando o treino...</p>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        document.addEventListener('DOMContentLoaded', () => {
            feather.replace();

            async function callGemini(prompt) {
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
                const payload = { contents: [{ parts: [{ text: prompt }] }] };
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (!response.ok) throw new Error(`API Error: ${response.statusText}`);
                    const result = await response.json();
                    return result.candidates?.[0]?.content?.parts?.[0]?.text || "Não foi possível gerar uma resposta.";
                } catch (error) {
                    console.error("Falha na chamada da API Gemini:", error);
                    return "Ocorreu um erro ao contatar a IA.";
                }
            }

            const students = [
                { id: 1, name: 'André Brito', img: 'https://placehold.co/100x100/1f2937/FFFFFF?text=AB', trainings: [{ id: 'A', name: 'Treino A', icon: 'check-square' },{ id: 'B', name: 'Treino B', icon: 'check-square' },{ id: 'corrida', name: 'Treino de corrida', icon: 'trending-up' },{ id: 'periodizacao', name: 'Periodização', icon: 'calendar' }] },
                { id: 2, name: 'Marcelly Bispo', img: 'https://placehold.co/100x100/ef4444/FFFFFF?text=MB', trainings: [{ id: 'A', name: 'Treino A', icon: 'check-square' },{ id: 'B', name: 'Treino B', icon: 'check-square' },{ id: 'corrida', name: 'Treino de corrida', icon: 'trending-up' },{ id: 'periodizacao', name: 'Periodização', icon: 'calendar' }] },
                { id: 3, name: 'Liliane Torres', img: 'https://placehold.co/100x100/1f2937/FFFFFF?text=LT', trainings: [{ id: 'A', name: 'Treino A', icon: 'check-square' },{ id: 'B', name: 'Treino B', icon: 'check-square' },{ id: 'corrida', name: 'Treino de corrida', icon: 'trending-up' },{ id: 'periodizacao', name: 'Periodização', icon: 'calendar' }] },
                { id: 4, name: 'Marcia Brito', img: 'https://placehold.co/100x100/ef4444/FFFFFF?text=MB', trainings: [{ id: 'A', name: 'Treino A', icon: 'check-square' },{ id: 'B', name: 'Treino B', icon: 'check-square' },{ id: 'corrida', name: 'Treino de corrida', icon: 'trending-up' },{ id: 'periodizacao', name: 'Periodização', icon: 'calendar' }] },
            ];
            
            const trainingData = {
                'A': { title: 'Treino A', exercises: [{ name: 'Agachamento parcial no Smith', details: '4 Séries | 10 Rep | REC 30"' },{ name: 'Agachamento Livre com HBC', details: '4 Séries | 10 Rep | REC 30"' },{ name: 'Cadeira extensora', details: '4 Séries | 10 Rep | REC 30"' },{ name: 'Leg Press 45', details: '3 Séries | 12 Rep | REC 30"' },{ name: 'Extensão de cotovelos no solo', details: '3 Séries | 10 Rep | REC 30"' },{ name: 'Stiff com Halteres', details: '4 Séries | 12 Rep | REC 30"' }, { name: 'Cadeira Adutora', details: '3 Séries | 15 Rep | REC 30"' }, { name: 'Cadeira Abdutora', details: '3 Séries | 15 Rep | REC 30"' }, { name: 'Panturrilha no Leg Press', details: '4 Séries | 20 Rep | REC 30"' }] },
// ... existing code ... -->

